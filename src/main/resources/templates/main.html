<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&display=swap" rel="stylesheet">
  <title>Main Page</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
    .--header {
      display:flex;
      justify-content : space-between;
      align-items : center;
      padding :10px;
      background-color:#FFE08C;
      font-family: "Black Han Sans";
      font-weight: bold;
    }
    .container {
      width: auto;
      min-height: calc(90vh - (40px + (10px * 2)));
      display:flex;
      flex-direction : column;
      justify-content: center;
      align-items: center;
    }
    .--logo-image{
      font-size :30px;
    }
    .--login-container a{
      margin-left :10px;
    }
    .--main{
      padding :20px;
    }
    .--footer{
      text-align:center;
      padding :10px;
      background-color:#f2f2f2;
    }
    .grid-container {
      display: grid; /* ê·¸ë¦¬ë“œ ì»¨í…Œì´ë„ˆë¡œ ì„¤ì • */
      grid-template-columns:
              minmax(300px, auto)
              minmax(300px, auto);
      gap:20px;
      justify-content:center;
    }
    .grid-item:nth-child(1) {
      grid-row-end : span;
    }
    .grid-item:nth-child(2) {
      grid-row-end: span 2;
    }
    .grid-item:nth-child(3) {
      grid-row-start : span;
    }
    .grid-item {
      background-color:#f9f9f9;
      padding :40px; /* ê·¸ë¦¬ë“œ ì•„ì´í…œ ì•ˆì˜ ì—¬ë°± ì„¤ì • */
      /* ë²„íŠ¼ í¬ê¸° ì¡°ì • */
      width: 100%;
      height: auto;
      font-size:18px;
      border-radius:5px;
      box-shadow: rgba(0,0,0,0.1) 0px 4px 6px;
    }
  </style>
</head>
<body>
<header class="--header">
  <div class="--logo">
    <div class="--logo-image">ğŸ” ë§›ìêµ­</div>
  </div>
  <!-- ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒê³¼ ë§ˆì´í˜ì´ì§€ ë§í¬ -->
  <div class="--login-container">
    <!-- ë§ˆì´í˜ì´ì§€ì™€ ë¡œê·¸ì•„ì›ƒ ë§í¬ -->
    <a href="/mypage">ë§ˆì´ í˜ì´ì§€</a>
    <!-- ì—¬ê¸°ì„œ /logout ê²½ë¡œëŠ” ê°€ì •í•œ ê²ƒì…ë‹ˆë‹¤ -->
    <a href="#" id="logout-button" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</a>
  </div>
  <!-- ë¡œê·¸ì¸ ë§í¬ -->
  <div class="--not-login-container" style="display: none;">
    <a href="/login">ë¡œê·¸ì¸</a>
  </div>
</header>
<main class="--main">
  <div class="container">
  <div class="grid-container">
    <button type='button' onclick='location.href="/page1"' class='grid-item'>ğŸ” ì£¼ë³€ ë§›ì§‘ ê²€ìƒ‰</button>
    <button type='button' onclick='location.href="/page2"' class='grid-item'>ğŸ• ì—°ì˜ˆì¸ ë§›ì§‘ ì§€ë„ </button>
    <button type='button' onclick='location.href="/mate"'class='grid-item'>ğŸ™‹â€ ë™í–‰ ì°¾ê¸°</button>
  </div>
  </div>
</main>
<footer class="--footer">
  Â©2023 Mutsa-Backend-School-JDK17. All rights reserved.
</footer>
<!--<script src = "users.js"></script>-->

<script>
  document.getElementById('logout-button').addEventListener('click', function() {
    logout();
  });

  function logout() {
    const token = localStorage.getItem('token');

    return fetch(`/logout`, {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${token}`
      },
    })
            .then(response => {
              if (response.ok) {
                localStorage.removeItem('token');
                window.location.href = "/main"; // ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™
              } else {
                alert(response.message);
              }
            })
            .catch(error => console.error('ë¡œê·¸ì•„ì›ƒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error));
  }
</script>
<script>
  // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í† í° í™•ì¸
  window.onload = function() {
    const token = localStorage.getItem('token');
    const loginContainer = document.querySelector('.--login-container');
    const notLoginContainer = document.querySelector('.--not-login-container');

    if (token) {
      // ë¡œê·¸ì¸ ìƒíƒœ
      loginContainer.style.display = 'block';
      notLoginContainer.style.display = 'none';
    } else {
      // ë¡œê·¸ì•„ì›ƒ ìƒíƒœ
      loginContainer.style.display = 'none';
      notLoginContainer.style.display = 'block';
    }
  }
</script>
<!--<script>-->
<!--  fetch('/reissue', {-->
<!--    method: 'POST',-->
<!--    credentials: 'include' // ì¿ í‚¤ ì „ì†¡ì„ ìœ„í•´ í•„ìš”í•œ ì˜µì…˜-->
<!--  })-->
<!--          .then(response => response.json())-->
<!--          .then(data => {-->
<!--            console.log(data);-->
<!--            localStorage.setItem('token', data.accessToken);-->
<!--            // í˜ì´ì§€ ë¦¬ë¡œë“œ? ë‹¤ìŒ ì‘ì—…?-->
<!--          })-->
<!--          .catch(error => {-->
<!--            console.error('ì¬ë°œê¸‰ ìš”ì²­ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);-->
<!--          });-->
<!--</script>-->
</body>
</html>
